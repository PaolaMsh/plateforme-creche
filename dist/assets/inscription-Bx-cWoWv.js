import{a as t,u as S,j as e,L as C}from"./react-BA1Wa0um.js";import{c as b}from"./index-rhoGazYf.js";import{a as N}from"./vendor-CSi4VfSZ.js";/* empty css             */import"./react-dom-C64KspPm.js";const R=()=>{const c={username:"",email:"",contact:"",password1:"",password2:""},[s,d]=t.useState(c),[u,i]=t.useState(""),[m,h]=t.useState(""),[l,p]=t.useState(!1),[a,f]=t.useState(!1),[o,j]=t.useState(!1),w=S(),r=n=>{d({...s,[n.target.name]:n.target.value})},v=async n=>{var x,g;if(n.preventDefault(),i(""),h(""),p(!0),s.password1!==s.password2){i("Les mots de passe ne correspondent pas."),p(!1);return}try{await N.post(`${b.API_BASE_URL}register/`,{user:{username:s.username,email:s.email,password:s.password1},contact:s.contact},{headers:{"Content-Type":"application/json"}}),h("Inscription réussie !"),d(c),setTimeout(()=>w("/auth-login"),2e3)}catch(y){i(((g=(x=y.response)==null?void 0:x.data)==null?void 0:g.error)||"Erreur lors de l’inscription.")}finally{p(!1)}};return e.jsxs("div",{className:"auth-container",children:[e.jsx("h2",{children:"Créer un compte"}),l&&e.jsx("div",{className:"loading-bar"}),u&&e.jsx("div",{className:"alert alert-error",children:u}),m&&e.jsx("p",{className:"alert alert-success",children:m}),e.jsxs("form",{onSubmit:v,children:[e.jsx("input",{type:"text",name:"username",placeholder:"Nom d'utilisateur",value:s.username,onChange:r,required:!0}),e.jsx("input",{type:"email",name:"email",placeholder:"Adresse email",value:s.email,onChange:r,required:!0}),e.jsx("input",{type:"text",name:"contact",placeholder:"Numéro de contact",value:s.contact,onChange:r,required:!0}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:a?"text":"password",name:"password1",placeholder:"Mot de passe",value:s.password1,onChange:r,required:!0,style:{paddingRight:"45px"}}),e.jsx("img",{src:a?"/ouvert.png":"/fermer.jpg",alt:"ouvert/fermer",onClick:()=>f(!a),style:{position:"absolute",top:"50%",right:"10px",transform:"translateY(-15%)",width:"24px",height:"24px",cursor:"pointer"},title:a?"Masquer le mot de passe":"Afficher le mot de passe"})]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:o?"text":"password",name:"password2",placeholder:"Confirmer le mot de passe",value:s.password2,onChange:r,required:!0,style:{paddingRight:"45px"}}),e.jsx("img",{src:o?"/ouvert.png":"/fermer.jpg",alt:"ouvert/fermer",onClick:()=>j(!o),style:{position:"absolute",top:"50%",right:"10px",transform:"translateY(-15%)",width:"24px",height:"24px",cursor:"pointer"},title:o?"Masquer le mot de passe":"Afficher le mot de passe"})]}),e.jsx("button",{className:"btn-primary",type:"submit",disabled:l,children:l?"Création du compte...":"S'inscrire"})]}),e.jsxs("p",{style:{textAlign:"center",marginTop:"30px"},children:["J'ai déjà un compte. ",e.jsx(C,{to:"/auth-login",children:"Se connecter"})]})]})};export{R as default};
