const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DefaultLayout-ChdNKuMA.js","assets/react-BA1Wa0um.js","assets/vendor-CSi4VfSZ.js","assets/react-dom-C64KspPm.js","assets/DefaultLayout-bBJvN_pC.css","assets/ProtectedRoute-CeYJoCyN.js","assets/Accueil-1-6hjbqR.js","assets/Accueil-BgyYO5lX.css","assets/Creche_Garderie-ClOJ0OmL.js","assets/Creche_Garderie-Qcil6tFK.css","assets/Support-BJ5kpzT9.js","assets/Support-3Oe6IJPh.css","assets/inscription-Bx-cWoWv.js","assets/auth-CGY_5ffv.css","assets/connexion-4Z0ash-z.js","assets/Abonnement-CJzyogOO.js","assets/Abonnement-BDcvtpLd.css","assets/suivredetails-Bxq12lFw.js","assets/suivredetails-CP6M3Jya.css","assets/crechedetails-DrwNmJES.js","assets/crechedetails-DfBbgY4x.css","assets/inscrireenfant-Cqls3Ne_.js","assets/inscrireenfant-DKzGd6ZG.css","assets/nounourapide-WYSHoTJ4.js","assets/nounourapide-BAcs9e1O.css","assets/profil-b_ojOdoX.js","assets/profil-CrBnkLlD.css","assets/ajoutcreche-C3MTFxlD.js","assets/ajoutcreche-CAqyrsKM.css","assets/detailsenfant-CsHq9WmB.js","assets/detailsenfant-BqJ99BQG.css"])))=>i.map(i=>d[i]);
import{a as t,j as e,u as b,b as k,c,N as T,B as O,R as D}from"./react-BA1Wa0um.js";import{R as w}from"./react-dom-C64KspPm.js";import{a as S,l as z,i as V,b as C,c as U}from"./vendor-CSi4VfSZ.js";(function(){const p=document.createElement("link").relList;if(p&&p.supports&&p.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))j(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&j(i)}).observe(document,{childList:!0,subtree:!0});function h(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function j(s){if(s.ep)return;s.ep=!0;const r=h(s);fetch(s.href,r)}})();const A={API_BASE_URL:"https://stage-backend-c4pz.onrender.com/api/client/",MEDIA_BASE_URL:"https://stage-backend-c4pz.onrender.com/"},L=t.createContext(),B=({children:m})=>{const[p,h]=t.useState(localStorage.getItem("access")||null),[j,s]=t.useState(localStorage.getItem("refresh")||null),[r,i]=t.useState(null);t.useEffect(()=>{const n=localStorage.getItem("access"),f=localStorage.getItem("refresh");n&&h(n),f&&s(f)},[]);const o=async n=>{var f,y,v;try{const g=await S.post(`${A.API_BASE_URL}token/`,n,{headers:{"Content-Type":"application/json"}}),P=g.data.access,R=g.data.refresh;return h(P),s(R),localStorage.setItem("access",P),localStorage.setItem("refresh",R),{success:!0}}catch(g){return{success:!1,status:(f=g.response)==null?void 0:f.status,message:((v=(y=g.response)==null?void 0:y.data)==null?void 0:v.detail)||"Erreur inconnue"}}},E=()=>{h(null),s(null),i(null),localStorage.removeItem("access"),localStorage.removeItem("refresh")},u=async()=>{if(!p)return!1;try{return await S.post(`${A.API_BASE_URL}token/verify/`,{token:p},{headers:{"Content-Type":"application/json"}}),!0}catch{return await x()}},x=async()=>{try{const f=(await S.post(`${A.API_BASE_URL}token/refresh/`,{refresh:j},{headers:{"Content-Type":"application/json"}})).data.access;return h(f),localStorage.setItem("access",f),!0}catch{return E(),!1}},_=()=>p;return e.jsx(L.Provider,{value:{token:p,user:r,login:o,logout:E,checkAuth:u,getToken:_},children:m})},ae=()=>t.useContext(L),$="modulepreload",N=function(m){return"/"+m},I={},a=function(p,h,j){let s=Promise.resolve();if(h&&h.length>0){let i=function(u){return Promise.all(u.map(x=>Promise.resolve(x).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),E=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=i(h.map(u=>{if(u=N(u),u in I)return;I[u]=!0;const x=u.endsWith(".css"),_=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${_}`))return;const n=document.createElement("link");if(n.rel=x?"stylesheet":$,x||(n.as="script"),n.crossOrigin="",n.href=u,E&&n.setAttribute("nonce",E),document.head.appendChild(n),x)return new Promise((f,y)=>{n.addEventListener("load",f),n.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${u}`)))})}))}function r(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return s.then(i=>{for(const o of i||[])o.status==="rejected"&&r(o.reason);return p().catch(r)})},l=()=>e.jsx("div",{style:{textAlign:"center",marginTop:"2rem"},children:"Chargement en cours..."}),d=t.lazy(()=>a(()=>import("./DefaultLayout-ChdNKuMA.js"),__vite__mapDeps([0,1,2,3,4]))),q=t.lazy(()=>a(()=>import("./ProtectedRoute-CeYJoCyN.js"),__vite__mapDeps([5,1,2,3]))),F=t.lazy(()=>a(()=>import("./Accueil-1-6hjbqR.js"),__vite__mapDeps([6,1,2,7]))),G=t.lazy(()=>a(()=>import("./Creche_Garderie-ClOJ0OmL.js"),__vite__mapDeps([8,1,2,3,9]))),K=t.lazy(()=>a(()=>import("./Support-BJ5kpzT9.js"),__vite__mapDeps([10,1,2,11]))),M=t.lazy(()=>a(()=>import("./inscription-Bx-cWoWv.js"),__vite__mapDeps([12,1,2,3,13]))),W=t.lazy(()=>a(()=>import("./connexion-4Z0ash-z.js"),__vite__mapDeps([14,1,2,3,13]))),H=t.lazy(()=>a(()=>import("./Abonnement-CJzyogOO.js"),__vite__mapDeps([15,1,2,3,16]))),J=t.lazy(()=>a(()=>import("./suivredetails-Bxq12lFw.js"),__vite__mapDeps([17,1,2,3,18]))),Q=t.lazy(()=>a(()=>import("./crechedetails-DrwNmJES.js"),__vite__mapDeps([19,1,2,3,20]))),X=t.lazy(()=>a(()=>import("./inscrireenfant-Cqls3Ne_.js"),__vite__mapDeps([21,1,2,3,22]))),Y=t.lazy(()=>a(()=>import("./nounourapide-WYSHoTJ4.js"),__vite__mapDeps([23,1,2,24]))),Z=t.lazy(()=>a(()=>import("./profil-b_ojOdoX.js"),__vite__mapDeps([25,1,2,3,26]))),ee=t.lazy(()=>a(()=>import("./ajoutcreche-C3MTFxlD.js"),__vite__mapDeps([27,1,2,3,28]))),te=t.lazy(()=>a(()=>import("./detailsenfant-CsHq9WmB.js"),__vite__mapDeps([29,1,2,30]))),se=()=>{const m=b();return t.useEffect(()=>{(window.location.pathname==="/"||window.location.pathname==="/index.html")&&m("/accueil",{replace:!0})},[m]),e.jsxs(k,{children:[e.jsx(c,{path:"/",element:e.jsx(T,{to:"/accueil",replace:!0})}),e.jsx(c,{path:"/auth-register",element:e.jsx(t.Suspense,{fallback:e.jsx(l,{}),children:e.jsx(M,{})})}),e.jsx(c,{path:"/auth-login",element:e.jsx(t.Suspense,{fallback:e.jsx(l,{}),children:e.jsx(W,{})})}),e.jsx(c,{path:"/accueil",element:e.jsx(t.Suspense,{fallback:e.jsx(l,{}),children:e.jsx(d,{children:e.jsx(F,{})})})}),e.jsx(c,{path:"/creche-garderie",element:e.jsx(t.Suspense,{fallback:e.jsx(l,{}),children:e.jsx(d,{children:e.jsx(G,{})})})}),e.jsx(c,{path:"/support",element:e.jsx(t.Suspense,{fallback:e.jsx(l,{}),children:e.jsx(d,{children:e.jsx(K,{})})})}),e.jsx(c,{path:"/crechedetails/:id",element:e.jsx(t.Suspense,{fallback:e.jsx(l,{}),children:e.jsx(d,{children:e.jsx(Q,{})})})}),e.jsx(c,{path:"/profil",element:e.jsx(t.Suspense,{fallback:e.jsx(l,{}),children:e.jsx(d,{children:e.jsx(Z,{})})})}),e.jsx(c,{path:"/detailsenfant",element:e.jsx(t.Suspense,{fallback:e.jsx(l,{}),children:e.jsx(d,{children:e.jsx(te,{})})})}),e.jsxs(c,{element:e.jsx(t.Suspense,{fallback:e.jsx(l,{}),children:e.jsx(q,{})}),children:[e.jsx(c,{path:"/mes-abonnements",element:e.jsx(t.Suspense,{fallback:e.jsx(l,{}),children:e.jsx(d,{children:e.jsx(H,{})})})}),e.jsx(c,{path:"/ajoutcreche",element:e.jsx(t.Suspense,{fallback:e.jsx(l,{}),children:e.jsx(d,{children:e.jsx(ee,{})})})}),e.jsx(c,{path:"/suivredetails/:id",element:e.jsx(t.Suspense,{fallback:e.jsx(l,{}),children:e.jsx(d,{children:e.jsx(J,{})})})}),e.jsx(c,{path:"/inscrireenfant/:id",element:e.jsx(t.Suspense,{fallback:e.jsx(l,{}),children:e.jsx(d,{children:e.jsx(X,{})})})}),e.jsx(c,{path:"/nounourapide",element:e.jsx(t.Suspense,{fallback:e.jsx(l,{}),children:e.jsx(d,{children:e.jsx(Y,{})})})})]})]})};z.add(V,C,U);const re=()=>e.jsx(O,{children:e.jsx(B,{children:e.jsx(se,{})})});w.createRoot(document.getElementById("root")).render(e.jsx(D.StrictMode,{children:e.jsx(re,{})}));export{A as c,ae as u};
