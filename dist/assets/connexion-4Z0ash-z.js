import{a,d as v,u as w,j as e,L as h}from"./react-BA1Wa0um.js";import{u as S}from"./index-rhoGazYf.js";/* empty css             */import"./vendor-CSi4VfSZ.js";import"./react-dom-C64KspPm.js";const A=()=>{const[s,x]=a.useState({username:"",password:""}),[u,t]=a.useState(""),[n,o]=a.useState(!1),[i,p]=a.useState(!1),{login:g}=S(),f=v(),j=w(),c=r=>{x({...s,[r.target.name]:r.target.value})},y=async r=>{var d,m;if(r.preventDefault(),t(""),o(!0),!s.username||!s.password){t("Veuillez remplir tous les champs."),o(!1);return}const l=await g({username:s.username,password:s.password});if(o(!1),l.success){const b=((m=(d=f.state)==null?void 0:d.from)==null?void 0:m.pathname)||"/accueil";j(b,{replace:!0})}else switch(l.status){case 401:t("Nom d'utilisateur ou mot de passe incorrect.");break;case 400:t("Requête invalide. Vérifiez les champs.");break;case 500:t("Erreur serveur. Veuillez réessayer plus tard.");break;default:t(l.message||"Une erreur s'est produite.")}};return e.jsxs("div",{className:"auth-container",children:[e.jsx("h2",{children:"Connexion"}),n&&e.jsx("div",{className:"loading-bar"}),u&&e.jsx("div",{className:"alert alert-error",children:u}),e.jsxs("form",{onSubmit:y,children:[e.jsx("input",{type:"text",name:"username",placeholder:"Nom d'utilisateur",value:s.username,onChange:c,required:!0}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:i?"text":"password",name:"password",placeholder:"Mot de passe",value:s.password,onChange:c,required:!0,style:{paddingRight:"40px"}}),e.jsx("img",{src:"/ouvert.png",alt:"ouvert",onClick:()=>p(!0),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-15%)",cursor:"pointer",width:"24px",height:"24px",userSelect:"none",display:i?"none":"block"},title:"Afficher le mot de passe"}),e.jsx("img",{src:"/fermer.jpg",alt:"fermer",onClick:()=>p(!1),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",cursor:"pointer",width:"24px",height:"24px",userSelect:"none",display:i?"block":"none"},title:"Masquer le mot de passe"})]}),e.jsx("button",{className:"btn-primary",type:"submit",disabled:n,children:n?"Connexion...":"Se connecter"})]}),e.jsxs("p",{style:{textAlign:"center",marginTop:"30px",display:"flex",justifyContent:"center"},children:["Je n'ai pas de compte. ",e.jsx("span",{style:{marginLeft:"5px"},children:e.jsx(h,{to:"/auth-register",children:"S'inscrire"})})]}),e.jsx("p",{style:{textAlign:"center",marginTop:"-20px"},children:e.jsx(h,{to:"/auth-reset",children:"Mot de passe oublié"})})]})};export{A as default};
